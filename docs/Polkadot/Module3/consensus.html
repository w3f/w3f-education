<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/w3f-education/blog/rss.xml" title="Polkadot Education Initiative Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/w3f-education/blog/atom.xml" title="Polkadot Education Initiative Blog Atom Feed"><title data-react-helmet="true">Polkadot Network Consensus | Polkadot Education Initiative</title><meta data-react-helmet="true" property="og:url" content="https://w3f.github.io/w3f-education/docs/Polkadot/Module3/consensus"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Polkadot Network Consensus | Polkadot Education Initiative"><meta data-react-helmet="true" name="description" content="We need to be able to revert the chain until we know with good probability"><meta data-react-helmet="true" property="og:description" content="We need to be able to revert the chain until we know with good probability"><link data-react-helmet="true" rel="shortcut icon" href="/w3f-education/img/Web3Foundation.png"><link data-react-helmet="true" rel="canonical" href="https://w3f.github.io/w3f-education/docs/Polkadot/Module3/consensus"><link data-react-helmet="true" rel="alternate" href="https://w3f.github.io/w3f-education/docs/Polkadot/Module3/consensus" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://w3f.github.io/w3f-education/docs/Polkadot/Module3/consensus" hreflang="x-default"><link rel="stylesheet" href="/w3f-education/assets/css/styles.186e147f.css">
<link rel="preload" href="/w3f-education/assets/js/runtime~main.3d6ee5de.js" as="script">
<link rel="preload" href="/w3f-education/assets/js/main.07a787af.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/w3f-education/"><img src="/w3f-education/img/Web3Foundation.png" alt="Polkadot Education Initiative" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/w3f-education/img/Web3Foundation.png" alt="Polkadot Education Initiative" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Technical Education</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__item navbar__link">Courses</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/w3f-education/docs/introblock">Blockchain</a></li><li><a class="dropdown__link" href="/w3f-education/docs/introdot">Polkadot</a></li><li><a class="dropdown__link" href="/w3f-education/docs/introrust">Rust Programming</a></li><li><a class="dropdown__link" href="/w3f-education/docs/introsubstrate">Substrate</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__item navbar__link">Resources</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/w3f-education/docs/introatoz">A - Z ELI5 series </a></li><li><a href="https://wiki.polkadot.network/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Polkadot Wiki</a></li><li><a class="dropdown__link" href="/w3f-education/docs/polkadotFAQ">Polkadot FAQ </a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/w3f-education/blog">Blog</a><a href="https://github.com/w3f/w3f-education" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/w3f-education/docs/introdot">Introduction to Polkadot</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">What is Polkadot?</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Interact with Polkadot</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Consensus and Security</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/w3f-education/docs/Polkadot/Module3/consensus">Polkadot Network Consensus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/w3f-education/docs/Polkadot/Module3/npos">Nominated Proof of Staking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/w3f-education/docs/Polkadot/Module3/maintainers">Validators and Nominators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/w3f-education/docs/Polkadot/Module3/sharedsecurity">Securing the Network</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/w3f-education/docs/Polkadot/Module3/securityimprovements">Security and Consensus Improvements</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cryptography and Networking</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Interoperability and Scalability</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Polkadot for Developers</a></li><li class="menu__list-item"><a href="https://wiki.polkadot.network/" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Learn more<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Polkadot Network Consensus</h1></header><p>We need to be able to revert the chain until we know with good probability
that all parachains are correct. This means that we need to be able to reorganise the chain and
for that the chain needs to be capable of forking. Thus we use a block production mechanism,
BABE, that while run by validators, has similar properties to proof-of-work chains.
Speci cally, we can use the longest chain rule as part of our consensus, and the next block producer
is not known in advance. On its own BABE would require us to wait a long time from the moment
a block is produced to the moment it is finalised, i.e. when we can be confident that with high
probability the block will never be reverted. Slow  finality is required in some circumstances to
deal with challenges to availability. Most of the time, however, we would prefer to finalise blocks
much faster. For this purpose, validators  nalise blocks using GRANDPA, a finality
gadget that is cleanly separated from block production. This separation makes it very adaptive
and here allows us to delay finalising blocks until challenges are dealt with, without slowing down
block production. GRANDPA gets Byzantine agreement on finalised blocks and will allow us to
prove to an entity that keeps track of the validator set which blocks are finalised, which will be
important for bridges.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="babe"></a>BABE<a class="hash-link" href="#babe" title="Direct link to heading">#</a></h2><p>In Polkadot, we produce relay chain blocks using our Blind Assignment for Blockchain Extension
protocol (BABE). BABE assigns validators randomly to block production slots using the random-
ness generated with blocks. A block production slot is a division of time when a block producer may
produce a block. Note, that time is not universally agreed on, which we will address later. These
assignments are completely private until the assigned validators produce their blocks. Therefore,
we use \Blind Assignment&quot; in the protocol name. BABE is similar to Ouroboros Praos with
some significant differences in the chain selection rule and timing assumptions.
In BABE, we may have slots without any assignment which we call empty slot. In order to  ll
the empty slots, we have a secondary block production mechanism based on Aura that assigns
validators to slots publicly. We note that these blocks do not contribute to the security of BABE
since the best chain selection and the random number generation algorithms work as if Aura blocks
do not exist. Therefore, next we only describe BABE together with its security properties.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="relative-time-protocol"></a>Relative Time Protocol<a class="hash-link" href="#relative-time-protocol" title="Direct link to heading">#</a></h3><p>Relative Time Protocol: The elected validators for a slot need to know when the right time
is to produce a block for the consistency and the security of BABE. For this, validators uses their
local computer clock which is not adjusted by any centralized clock adjustment protocols such
as the Network Time Protocol. Instead, they keep their clock synchronised with the other
validators with the relative time protocol. </p><p>In BABE, we assume that after the genesis block is released, elected validators of the  rst epoch
store the arrival time of the genesis block with respect to their local clock. Then, they mark the
beginning time of the  rst slot and increment the slot number every T seconds. After this point,
they periodically run the relative algorithm not to lose the synchronisation with others because of
their local clock drifts. In addition to this, a validator who joins after the genesis block runs the
relative time algorithm to be synchronised with the other validators.</p><p>As mentioned above, we want a  nalisation mechanism that is
exible and separated from block
production, which is achieved by GRANDPA. The only modi cation to BABE required for it to
work with GRANDPA is to change the fork-choice rule: instead of building on the longest chain,
a validator producing a block should build on the longest chain including all blocks that it sees as
 nalised. GRANDPA can work with many di erent block production mechanisms and it will be
possible to switch out BABE with another.
Intuitively GRANDPA is a Byzantine agreement protocol that works to agree on a chain,
out of many possible forks, by following some simpler fork choice rule, which together with the
block production mechanism would give probabilistic  nality if GRANDPA itself stopped  nalising
blocks. We want to be able to agree on many blocks at once, in contrast to single-block Byzantine
agreement protocols.
We assume that we can ask the fork choice rule for the best block given a particular block. The
basic idea is that we want to reach Byzantine agreement on the pre x of the chain that everyone
agrees on. To make this more robust, we try to agree on the pre x of the chain that 2/3 of
validators agree on.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="grandpa-finality-gadget"></a>GRANDPA Finality Gadget<a class="hash-link" href="#grandpa-finality-gadget" title="Direct link to heading">#</a></h2><iframe width="560" height="315" src="https://www.youtube.com/embed/0shPS6SXPKE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/w3f/w3f-education/edit/main/docs/Polkadot/Module3/consensus.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2022-06-10T17:21:54.000Z">6/10/2022</time></b> by <b>Radha</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/w3f-education/docs/Polkadot/Module2/treasury"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Treasury</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/w3f-education/docs/Polkadot/Module3/npos"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Nominated Proof of Staking »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#babe" class="table-of-contents__link">BABE</a><ul><li><a href="#relative-time-protocol" class="table-of-contents__link">Relative Time Protocol</a></li></ul></li><li><a href="#grandpa-finality-gadget" class="table-of-contents__link">GRANDPA Finality Gadget</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Courses</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/w3f-education/docs/introblock">Blockchain Fundamentals</a></li><li class="footer__item"><a class="footer__link-item" href="/w3f-education/docs/introdot">Introduction to Polkadot</a></li><li class="footer__item"><a class="footer__link-item" href="/w3f-education/docs/introrust">Introduction to Rust Programming</a></li><li class="footer__item"><a class="footer__link-item" href="/w3f-education/docs/introsubstrate">Introduction to Substrate</a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items"><li class="footer__item"><a href="https://wiki.polkadot.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://web3.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/Web3foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/w3f-education/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/w3f/w3f-education" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Web3 Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/w3f-education/assets/js/runtime~main.3d6ee5de.js"></script>
<script src="/w3f-education/assets/js/main.07a787af.js"></script>
</body>
</html>